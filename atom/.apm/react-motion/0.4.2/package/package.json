{"name":"react-motion","version":"0.4.2","description":"A spring that solves your animation problems.","main":"lib/react-motion.js","peerDependencies":{"react":">=0.13.2 || ^0.14"},"devDependencies":{"babel":"^5.8.23","babel-browser-transform":"^0.1.0","babel-core":"^5.6.18","babel-eslint":"^4.1.3","babel-loader":"^5.3.1","codemirror":"^5.5.0","css-loader":"^0.19.0","eslint":"^1.6.0","eslint-config-airbnb":"0.1.0","eslint-loader":"^1.1.0","eslint-plugin-react":"^3.5.1","inject-loader":"^2.0.1","isparta-loader":"^0.2.0","jasmine-core":"^2.3.4","karma":"^0.13.10","karma-coverage":"^0.5.2","karma-jasmine":"^0.3.6","karma-jasmine-diff-reporter":"^0.3.2","karma-phantomjs-launcher":"^0.2.0","karma-webpack":"^1.7.0","lodash.range":"^3.0.1","phantomjs":"^1.9.17","react":">=0.14.3","react-addons-test-utils":"^0.14.6","react-codemirror":">=0.1.2","react-dom":">=0.14.3","react-hot-loader":"^1.2.8","style-loader":"^0.12.4","webpack":"^1.10.1","webpack-dev-server":"^1.10.1"},"scripts":{"start":"node server.js","build-demos":"webpack","lint":"eslint --ext .js,.jsx .","prerelease":"rm -rf lib && babel src --out-dir lib && webpack --config webpack.prod.config.js","test":"karma start ./karma.conf.js --single-run","test:travis":"karma start ./karma.conf.js --single-run","test:dev":"karma start ./karma.conf.js --no-single-run --auto-watch","test:cov":"karma start ./karma.conf.js --single-run --reporters coverage","gh-pages":"git fetch origin && git checkout gh-pages && git reset --hard origin/gh-pages && git rebase origin/master --force-rebase && npm run build-demos && git add . && git commit --amend --no-edit && git push origin gh-pages --force && git checkout master"},"repository":{"type":"git","url":"git+https://github.com/chenglou/react-motion.git"},"keywords":["react","component","react-component","transitiongroup","spring","tween","motion","animation","transition","ui"],"author":{"name":"chenglou"},"license":"MIT","dependencies":{"performance-now":"^0.2.0","raf":"^3.1.0"},"readme":"# React-Motion\n\n[![Build Status](https://travis-ci.org/chenglou/react-motion.svg?branch=master)](https://travis-ci.org/chenglou/react-motion)\n[![npm version](https://badge.fury.io/js/react-motion.svg)](https://www.npmjs.com/package/react-motion)\n[![Bower version](https://badge.fury.io/bo/react-motion.svg)](http://badge.fury.io/bo/react-motion)\n[![react-motion channel on discord](https://img.shields.io/badge/discord-react--motion%40reactiflux-738bd7.svg?style=flat)](https://discordapp.com/invite/0ZcbPKXt5bYzmcI0)\n\n```jsx\nimport {Motion, spring} from 'react-motion';\n// In your render...\n<Motion defaultStyle={{x: 0}} style={{x: spring(10)}}>\n  {value => <div>{value.x}</div>}\n</Motion>\n```\n\nAnimate a counter from `0` to `10`. For more advanced usage, see below.\n\n### Install\n\n- Npm: `npm install --save react-motion`\n\n- Bower: **do not install with `bower install react-motion`, it won't work**. Use `bower install --save https://unpkg.com/react-motion/bower.zip`. Or in `bower.json`:\n```json\n{\n  \"dependencies\": {\n    \"react-motion\": \"https://unpkg.com/react-motion/bower.zip\"\n  }\n}\n```\nthen include as\n```html\n<script src=\"bower_components/react-motion/build/react-motion.js\"></script>\n```\n\n- 1998 Script Tag:\n```html\n<script src=\"https://unpkg.com/react-motion/build/react-motion.js\"></script>\n(Module exposed as `ReactMotion`)\n```\n\n**For React-native**: previous react-motion v0.3.* supported a dedicated build for RN, which has now been made obsolete since RN v0.18. This library should Just Work under the new React-Native 0.18+.\n\n### Try things yourself\n```sh\ngit clone https://github.com/chenglou/react-motion.git\ncd react-motion\nnpm install\n```\n\nTo try the demos locally:\n\n- with hot reloading (**slow, development version**): run `npm start`.\n- Without hot reloading (**faster, production version**): run `npm run build-demos` and open the static `demos/demo_name/index.html` file directly. **Don't forget to use production mode when testing your animation's performance**!\n\nTo build the repo yourself: `npm run prerelease`.\n\n### Demos\n- [Simple Transition](http://chenglou.github.io/react-motion/demos/demo0-simple-transition)\n- [Chat Heads](http://chenglou.github.io/react-motion/demos/demo1-chat-heads)\n- [Draggable Balls](http://chenglou.github.io/react-motion/demos/demo2-draggable-balls)\n- [TodoMVC List Transition](http://chenglou.github.io/react-motion/demos/demo3-todomvc-list-transition)\n- [Photo Gallery](http://chenglou.github.io/react-motion/demos/demo4-photo-gallery)\n- [Spring Parameters Chooser](http://chenglou.github.io/react-motion/demos/demo5-spring-parameters-chooser)\n- [Water Ripples](http://chenglou.github.io/react-motion/demos/demo7-water-ripples)\n- [Draggable List](http://chenglou.github.io/react-motion/demos/demo8-draggable-list)\n\n[Check the wiki for more!](https://github.com/chenglou/react-motion/wiki/Gallery-of-third-party-React-Motion-demos)\n\n## What does this library try to solve?\n\n[My React-Europe talk](https://www.youtube.com/watch?v=1tavDv5hXpo)\n\nFor 95% of use-cases of animating components, we don't have to resort to using hard-coded easing curves and duration. Set up a stiffness and damping for your UI element, and let the magic of physics take care of the rest. This way, you don't have to worry about petty situations such as interrupted animation behavior. It also greatly simplifies the API.\n\nThis library also provides an alternative, more powerful API for React's `TransitionGroup`.\n\n## API\n\n**Coming from 0.3.* to 0.4.0? [Here](https://github.com/chenglou/react-motion/wiki)'s the upgrade guide.**\n\nExports:\n- `spring`.\n- `Motion`\n- `StaggeredMotion`\n- `TransitionMotion`\n- `presets`\n\n[Here](https://github.com/chenglou/react-motion/blob/026f4d18d3246e14abbf17bef0a9eda536934193/src/Types.js)'s the well-annotated public [Flow type](http://flowtype.org) definition file (you don't have to use Flow with React-motion, but the types help document the API below).\n\n---\n\n### Helpers\n\n##### - spring: (val: number, config?: SpringHelperConfig) => OpaqueConfig\nUsed in conjunction with the components below. Specifies the how to animate to the destination value, e.g. `spring(10, {stiffness: 120, damping: 17})` means \"animate to value 10, with a spring of stiffness 120 and damping 17\".\n\n- `val`: the value.\n- `config`: optional, for further adjustments. Possible fields:\n  - `stiffness`: optional, defaults to `170`.\n  - `damping`: optional, defaults to `26`.\n  - `precision`: optional, defaults to `0.01`. Specifies both the rounding of the interpolated value and the speed (internal).\n\n  It's normal not to feel how stiffness and damping affect your spring; use [Spring Parameters Chooser](http://chenglou.github.io/react-motion/demos/demo5-spring-parameters-chooser) to get a feeling. **Usually**, you'd just use the list of tasteful stiffness/damping presets below.\n\n##### - Presets for `{stiffness, damping}`\nCommonly used spring configurations used like so: `spring(10, presets.wobbly)` or `spring(20, {...presets.gentle, precision: 0.1})`. [See here](https://github.com/chenglou/react-motion/blob/026f4d18d3246e14abbf17bef0a9eda536934193/src/presets.js).\n\n---\n\n### &lt;Motion />\n#### Usage\n```jsx\n<Motion defaultStyle={{x: 0}} style={{x: spring(10)}}>\n  {interpolatingStyle => <div style={interpolatingStyle} />}\n</Motion>\n```\n\n#### Props\n\n##### - style: Style\n\nRequired. The `Style` type is an object that maps to either a `number` or an `OpaqueConfig` returned by `spring()` above. Must keep the same keys throughout component's existence. The meaning of the values:\n\n- an `OpaqueConfig` returned from `spring(x)`: interpolate to `x`.\n- a `number` `x`: jump to `x`, do not interpolate.\n\n##### - defaultStyle?: PlainStyle\nOptional. The `PlainStyle` type maps to `number`s. Defaults to an object with the same keys as `style` above, whose values are the initial numbers you're interpolating on. **Note that during subsequent renders, this prop is ignored. The values will interpolate from the current ones to the destination ones (specified by `style`)**.\n\n##### - children: (interpolatedStyle: PlainStyle) => ReactElement\nRequired **function**.\n\n- `interpolatedStyle`: the interpolated style object passed back to you. E.g. if you gave `style={{x: spring(10), y: spring(20)}}`, you'll receive as `interpolatedStyle`, at a certain time, `{x: 5.2, y: 12.1}`, which you can then apply on your `div` or something else.\n\n- Return: must return **one** React element to render.\n\n---\n\n### &lt;StaggeredMotion />\nAnimates a collection of items whose values depend on each other, creating a natural, springy, \"staggering\" effect [like so](http://chenglou.github.io/react-motion/demos/demo1-chat-heads). This is preferred over hard-coding a delay for an array of `Motions` to achieve a similar (but less natural-looking) effect.\n\n#### Usage\n```jsx\n<StaggeredMotion\n  defaultStyles={[{h: 0}, {h: 0}, {h: 0}]}\n  styles={prevInterpolatedStyles => prevInterpolatedStyles.map((_, i) => {\n    return i === 0\n      ? {h: spring(100)}\n      : {h: spring(prevInterpolatedStyles[i - 1].h)}\n  })}>\n  {interpolatingStyles =>\n    <div>\n      {interpolatingStyles.map((style, i) =>\n        <div key={i} style={{border: '1px solid', height: style.h}} />)\n      }\n    </div>\n  }\n</StaggeredMotion>\n```\n\nAka \"the current spring's destination value is the interpolating value of the previous spring\". Imagine a spring dragging another. Physics, it works!\n\n#### Props\n\n##### - styles: (previousInterpolatedStyles: ?Array&lt;PlainStyle>) => Array&lt;Style>\nRequired **function**. **Don't forget the \"s\"**!\n\n- `previousInterpolatedStyles`: the previously interpolating (array of) styles (`undefined` at first render, unless `defaultStyles` is provided).\n\n- Return: must return an array of `Style`s containing the destination values, e.g. `[{x: spring(10)}, {x: spring(20)}]`.\n\n##### - defaultStyles?: Array&lt;PlainStyle>\nOptional. Similar to `Motion`'s `defaultStyle`, but an array of them.\n\n##### - children: (interpolatedStyles: Array&lt;PlainStyle>) => ReactElement\nRequired **function**. Similar to `Motion`'s `children`, but accepts the array of interpolated styles instead, e.g. `[{x: 5}, {x: 6.4}, {x: 8.1}]`\n\n---\n\n### &lt;TransitionMotion />\n**Helps you to do mounting and unmounting animation**.\n\n#### Usage\n\nYou have items `a`, `b`, `c`, with their respective style configuration, given to `TransitionMotion`'s `styles`. In its `children` function, you're passed the three interpolated styles as params; you map over them and produce three components. All is good.\n\nDuring next render, you give only `a` and `b`, indicating that you want `c` gone, but that you'd like to animate it reaching value `0`, before killing it for good.\n\nFortunately, `TransitionMotion` has kept `c` around and still passes it into the `children` function param. So when you're mapping over these three interpolated styles, you're still producing three components. It'll keep interpolating, while checking `c`'s current value at every frame. Once `c` reaches the specified `0`, `TransitionMotion` will remove it for good (from the interpolated styles passed to your `children` function).\n\nThis time, when mapping through the two remaining interpolated styles, you'll produce only two components. `c` is gone for real.\n\n```jsx\nconst Demo = React.createClass({\n  getInitialState() {\n    return {\n      items: [{key: 'a', size: 10}, {key: 'b', size: 20}, {key: 'c', size: 30}],\n    };\n  },\n  componentDidMount() {\n    this.setState({\n      items: [{key: 'a', size: 10}, {key: 'b', size: 20}], // remove c.\n    });\n  },\n  willLeave() {\n    // triggered when c's gone. Keeping c until its width/height reach 0.\n    return {width: spring(0), height: spring(0)};\n  },\n  render() {\n    return (\n      <TransitionMotion\n        willLeave={this.willLeave}\n        styles={this.state.items.map(item => ({\n          key: item.key,\n          style: {width: item.size, height: item.size},\n        }))}>\n        {interpolatedStyles =>\n          // first render: a, b, c. Second: still a, b, c! Only last one's a, b.\n          <div>\n            {interpolatedStyles.map(config => {\n              return <div key={config.key} style={{...config.style, border: '1px solid'}} />\n            })}\n          </div>\n        }\n      </TransitionMotion>\n    );\n  },\n});\n```\n\n#### Props\n\nFirst, two type definitions to ease the comprehension.\n\n- `TransitionStyle`: an object of the format `{key: string, data?: any, style: Style}`.\n\n  - `key`: required. The ID that `TransitionMotion` uses to track which configuration is which across renders, even when things are reordered. Typically reused as the component `key` when you map over the interpolated styles.\n\n  - `data`: optional. Anything you'd like to carry along. This is so that when the previous section example's `c` disappears, you still get to access `c`'s related data, such as the text to display along with it.\n\n  - `style`: required. The actual starting style configuration, similar to what you provide for `Motion`'s `style`. Maps keys to either a number or an `OpaqueConfig` returned by `spring()`.\n\n- `TransitionPlainStyle`: similar to above, except the `style` field's value is of type `PlainStyle`, aka an object that maps to numbers.\n\n##### - styles: Array&lt;TransitionStyle> | (previousInterpolatedStyles: ?Array&lt;TransitionPlainStyle>) => Array&lt;TransitionStyle>\nRequired. Accepts either:\n\n  - an array of `TransitionStyle` configs, e.g. `[{key: 'a', style: {x: spring(0)}}, {key: 'b', style: {x: spring(10)}}]`.\n\n  - a function similar to `StaggeredMotion`, taking the previously interpolating styles (`undefined` at first call, unless `defaultStyles` is provided), and returning the previously mentioned array of configs. __You can do staggered mounting animation with this__.\n\n##### - defaultStyles?: Array&lt;TransitionPlainStyle>\nOptional. Similar to the other components' `defaultStyle`/`defaultStyles`.\n\n##### - children: (interpolatedStyles: Array&lt;TransitionPlainStyle>) => ReactElement\nRequired **function**. Similar to other two components' `children`. Receive back an array similar to what you provided for `defaultStyles`, only that each `style` object's number value represent the currently interpolating value.\n\n##### - willLeave?: (styleThatLeft: TransitionStyle) => ?Style\nOptional. Defaults to `() => null`. **The magic sauce property**.\n\n- `styleThatLeft`: the e.g. `{key: ..., data: ..., value: ...}` object from the `styles` array, identified by `key`, that was present during a previous render, and that is now absent, thus triggering the call to `willLeave`.\n\n- Return: `null` to indicate you want the `TransitionStyle` gone immediately. A `Style` object to indicate you want to reach transition to the specified value(s) before killing the `TransitionStyle`.\n\n##### - willEnter?: (styleThatEntered: TransitionStyle) => PlainStyle\nOptional. Defaults to `styleThatEntered => stripStyle(styleThatEntered.style)`. Where `stripStyle` turns `{x: spring(10), y: spring(20)}` into `{x: 10, y: 20}`.\n\n- `styleThatEntered`: similar to `willLeave`'s, except the `TransitionStyle` represents the object whose `key` value was absent during the last `render`, and that is now present.\n\n- Return: a `defaultStyle`-like `PlainStyle` configuration, e.g. `{x: 0, y: 0}`, that serves as the starting values of the animation. Under this light, the default provided means \"a style config that has the same starting values as the destination values\".\n\n**Note** that `willEnter` and `defaultStyles` serve different purposes. `willEnter` only triggers when a previously inexistent `TransitionStyle` inside `styles` comes into the new render.\n\n---\n\n## FAQ\n\n- How do I set the duration of my animation?\n\n[Hard-coded duration goes against fluid interfaces](https://twitter.com/andy_matuschak/status/566736015188963328). If your animation is interrupted mid-way, you'd get a weird completion animation if you hard-coded the time. That being said, in the demo section there's a great [Spring Parameters Chooser](http://chenglou.github.io/react-motion/demos/demo5-spring-parameters-chooser) for you to have a feel of what spring is appropriate, rather than guessing a duration in the dark.\n\n- How do I unmount the `TransitionMotion` container itself?\n\nYou don't. Unless you put it in another `TransitionMotion`...\n\n- How do I do staggering/chained animation where items animate in one after another?\n\nSee [`StaggeredMotion`](#staggeredmotion-)\n\n- My `ref` doesn't work in the children function.\n\nReact string refs won't work:\n\n```jsx\n<Motion style={...}>{currentValue => <div ref=\"stuff\" />}</Motion>\n```\n\nThis is how React works. Here's the [callback ref solution](https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute).\n","readmeFilename":"README.md","bugs":{"url":"https://github.com/chenglou/react-motion/issues"},"homepage":"https://github.com/chenglou/react-motion#readme","_id":"react-motion@0.4.2","_shasum":"a7b38f9aae9940747e2070387aa5b549f2c935dd","_resolved":"https://registry.npmjs.org/react-motion/-/react-motion-0.4.2.tgz","_from":"https://registry.npmjs.org/react-motion/-/react-motion-0.4.2.tgz"}